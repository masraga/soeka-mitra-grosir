# Ringkasan Aplikasi Soeka Mitra Grosir

---

## 1. Deskripsi Model Bisnis

**Soeka Mitra Grosir** adalah aplikasi toko online berbasis web untuk penjualan produk **sembako** (sembilan bahan pokok) yang dibangun menggunakan **Laravel 12**.

### Target Pengguna

| Aktor                 | Deskripsi                                                                                                 |
| --------------------- | --------------------------------------------------------------------------------------------------------- |
| **Pelanggan (Guest)** | Pembeli yang bisa langsung belanja **tanpa perlu membuat akun/login**. Cukup isi data diri saat checkout. |
| **Admin**             | Pengelola toko yang mengelola seluruh operasional melalui panel admin (`/admin`)                          |

### Konsep Bisnis Utama

- **Tanpa registrasi pelanggan** â€” Pelanggan langsung browse, pilih produk, isi keranjang, dan checkout dengan mengisi nama, telepon, dan alamat saat proses checkout.
- **Pembayaran manual via transfer bank** â€” Tidak menggunakan payment gateway. Pelanggan transfer ke rekening bank toko, lalu upload bukti pembayaran.
- **Verifikasi manual oleh admin** â€” Admin mengecek bukti pembayaran dan mengubah status pesanan secara manual.
- **Produk sembako** â€” Menjual 10 kategori produk seperti Beras & Gandum, Minyak Goreng, Gula & Garam, Tepung, Mie & Pasta, dll.
- **Deployment target: shared hosting** â€” Dirancang untuk berjalan di shared hosting tanpa akses SSH penuh, menggunakan database driver untuk session & cache, dan sync queue.

### Tech Stack

| Komponen        | Teknologi              |
| --------------- | ---------------------- |
| Backend         | Laravel 12.x, PHP 8.2+ |
| Database        | MySQL 8.x              |
| Frontend CSS    | Tailwind CSS v4        |
| JS Interaktif   | Alpine.js 3.x (CDN)    |
| Build Tool      | Vite 7.x               |
| Session & Cache | Database Driver        |

---

## 2. Deskripsi Lengkap Fungsi Website

### A. Storefront (Halaman Pelanggan)

#### 1. Homepage

- **Banner Carousel** â€” Menampilkan gambar promosi dari folder `public/banner/` dengan Alpine.js carousel (autoplay 5 detik, navigasi prev/next, dot indicators).
- **Produk Terbaru** â€” Menampilkan 12 produk terbaru yang aktif dan tersedia stok, dalam grid responsive 2/3/4 kolom.

#### 2. Katalog Produk

- **Pencarian** â€” Search bar untuk mencari produk berdasarkan nama.
- **Filter kategori** â€” Dropdown untuk filter berdasarkan kategori.
- **Product grid** â€” Menampilkan produk dengan card (gambar, nama, kategori, harga) + pagination.

#### 3. Detail Produk

- Gambar besar, nama, kategori, harga, deskripsi lengkap.
- **Quantity selector** â€” Alpine.js +/- buttons untuk mengatur jumlah.
- **Add to cart** â€” Tombol tambah ke keranjang.
- **Produk terkait** â€” Grid 4 produk dari kategori yang sama.

#### 4. Keranjang Belanja

Cart berbasis **session** (bukan database):

- Tabel item: gambar, nama, harga, quantity input, subtotal per item.
- Update quantity, hapus item, clear all.
- Summary: total items, subtotal, tombol lanjut ke checkout.
- Empty state jika keranjang kosong.

#### 5. Checkout

- Form data pelanggan: nama, telepon, alamat, catatan.
- Pilih layanan pengiriman (dropdown dari master data admin).
- Ringkasan pesanan + kalkulasi dinamis (subtotal + ongkir = total).

#### 6. Halaman Sukses Checkout

- Icon sukses + nomor pesanan.
- **Countdown timer** ke batas waktu pembayaran (Alpine.js, format HH:MM:SS).
- Info transfer bank (dari `setting()`: bank_name, bank_account_number, bank_account_name).
- Detail pesanan: items, subtotal, ongkir, total.
- Link ke halaman lacak pesanan + link ke beranda.

#### 7. Lacak Pesanan

- **Form pencarian** â€” Nomor pesanan + nomor telepon (keamanan: harus cocok keduanya).
- **Hasil pesanan**: status badge berwarna, countdown timer (jika pending), data pelanggan, daftar item, total + ongkir.
- **Upload bukti bayar** â€” Form upload gambar (max 2MB, JPEG/PNG/JPG) jika status `pending_payment` dan belum expired.
- **Preview bukti bayar** â€” Jika sudah diupload.

### B. Panel Admin (`/admin`)

| Menu           | Fungsi                                                                                                                |
| -------------- | --------------------------------------------------------------------------------------------------------------------- |
| **Dashboard**  | Statistik: total produk, total pesanan, pesanan pending, pendapatan hari ini + 10 pesanan terbaru                     |
| **Produk**     | CRUD produk + search + filter kategori. Field: nama, kategori, harga, stok, deskripsi, gambar, status aktif           |
| **Kategori**   | CRUD kategori produk. Field: nama, gambar                                                                             |
| **Pesanan**    | Lihat semua pesanan + search + filter status. Detail: info pelanggan, items, keuangan, bukti bayar, **update status** |
| **Pengiriman** | CRUD layanan pengiriman. Field: nama, deskripsi, biaya, estimasi, urutan, status aktif                                |
| **Slider**     | CRUD slider/banner (model Slider masih ada tapi homepage sudah pakai folder statis `public/banner/`)                  |
| **Pengaturan** | Edit settings pembayaran (deadline, info bank) dan toko (nama, alamat, telepon, deskripsi)                            |

### C. Fitur Sistem Otomatis

#### Auto-Cancel Pesanan Expired

- Pesanan dengan status `pending_payment` yang melewati `payment_deadline` otomatis dibatalkan.
- **Stok dikembalikan** saat pesanan di-cancel.
- Dijalankan via artisan command `orders:cancel-expired` + cron job setiap 5 menit.

#### Settings System

- Key-value store di database dengan cache (`Cache::rememberForever`).
- Diakses via global helper `setting()`.
- Cache otomatis dihapus saat admin mengubah setting.

---

## 3. Deskripsi Lengkap Proses Bisnis Sistem

### Alur Lengkap: Dari Browse hingga Pesanan Selesai

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   PELANGGAN (GUEST)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

TAHAP 1: BROWSING
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Pelanggan â†’ Buka homepage (/)
         â†’ Lihat banner promosi + 12 produk terbaru
         â†’ Buka katalog (/products) â†’ search/filter kategori
         â†’ Klik produk â†’ lihat detail (/products/{slug})

TAHAP 2: KERANJANG
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Pelanggan â†’ Pilih quantity â†’ Klik "Tambah ke Keranjang"
         â†’ Sistem simpan ke SESSION (bukan database)
         â†’ Validasi: produk aktif, stok > 0, qty tidak melebihi stok
         â†’ Buka keranjang (/cart) â†’ update qty / hapus item
         â†’ Klik "Lanjut ke Checkout"

TAHAP 3: CHECKOUT
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Pelanggan â†’ Isi form: nama, telepon, alamat, catatan (opsional)
         â†’ Pilih layanan pengiriman
         â†’ Sistem:
           â”œâ”€â”€ Re-validasi stok semua item
           â”œâ”€â”€ DB::beginTransaction()
           â”‚   â”œâ”€â”€ Buat Order (status: pending_payment)
           â”‚   â”‚   â”œâ”€â”€ Generate order_number: ORD-YYYYMMDD-XXXXX
           â”‚   â”‚   â”œâ”€â”€ Set payment_deadline: now() + payment_deadline_hours
           â”‚   â”‚   â””â”€â”€ Snapshot: shipping_service_name + shipping_cost
           â”‚   â”œâ”€â”€ Buat OrderItem per produk (snapshot: product_name + price)
           â”‚   â”œâ”€â”€ Kurangi stok produk (Product::decrement)
           â”‚   â””â”€â”€ DB::commit()
           â”œâ”€â”€ Hapus cart dari session
           â””â”€â”€ Redirect ke halaman sukses

TAHAP 4: PEMBAYARAN
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Pelanggan â†’ Lihat halaman sukses:
           â”œâ”€â”€ Nomor pesanan
           â”œâ”€â”€ Countdown timer batas pembayaran
           â”œâ”€â”€ Info bank: BCA - 1234567890 a.n. Soeka Mitra Grosir
           â””â”€â”€ Total yang harus ditransfer
         â†’ Transfer ke rekening bank toko
         â†’ Buka halaman lacak pesanan (/track-order)
         â†’ Masukkan: nomor pesanan + nomor telepon
         â†’ Upload foto bukti transfer (max 2MB, JPEG/PNG/JPG)
         â†’ File disimpan ke public/uploads/proofs/

         âš ï¸ JIKA TIDAK BAYAR DALAM BATAS WAKTU:
         â†’ Cron job (setiap 5 menit) menjalankan orders:cancel-expired
         â†’ Status berubah ke "cancelled"
         â†’ Stok produk dikembalikan otomatis
```

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ADMIN                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

TAHAP 5: VERIFIKASI PEMBAYARAN
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Admin â†’ Login ke /admin/login (admin@soekamitra.com)
     â†’ Buka Dashboard â†’ lihat pesanan pending
     â†’ Buka Pesanan â†’ filter status "Sudah Dibayar"
     â†’ Klik detail pesanan
     â†’ Cek bukti pembayaran (preview gambar, klik untuk full-size)
     â†’ Jika valid â†’ Update status ke "Pembayaran Dikonfirmasi"

TAHAP 6: PROSES & KIRIM
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Admin â†’ Pack/siapkan pesanan
     â†’ Update status ke "Diproses"
     â†’ Serahkan ke kurir/layanan pengiriman
     â†’ Update status ke "Dikirim"
     â†’ (Opsional) Hubungi pelanggan via telepon/WA

TAHAP 7: SELESAI
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Admin â†’ Setelah pelanggan konfirmasi terima barang
     â†’ Update status ke "Selesai"
```

### Flow Status Pesanan

```
pending_payment (Menunggu Pembayaran) ğŸŸ¡
    â”‚
    â”œâ”€â”€â†’ payment_confirmed (Pembayaran Dikonfirmasi) ğŸ”µ
    â”‚       â”‚
    â”‚       â””â”€â”€â†’ processing (Diproses) ğŸŸ£
    â”‚               â”‚
    â”‚               â””â”€â”€â†’ shipped (Dikirim) ğŸŸ£
    â”‚                       â”‚
    â”‚                       â””â”€â”€â†’ completed (Selesai) ğŸŸ¢
    â”‚
    â””â”€â”€â†’ cancelled (Dibatalkan) ğŸ”´
         (manual oleh admin ATAU auto-cancel jika expired)
```

| Status              | Label                   | Warna Badge | Trigger                            |
| ------------------- | ----------------------- | ----------- | ---------------------------------- |
| `pending_payment`   | Menunggu Pembayaran     | Kuning      | Saat checkout berhasil             |
| `payment_confirmed` | Pembayaran Dikonfirmasi | Biru        | Admin verifikasi bukti bayar       |
| `processing`        | Diproses                | Indigo      | Admin mulai packing                |
| `shipped`           | Dikirim                 | Ungu        | Admin serahkan ke kurir            |
| `completed`         | Selesai                 | Hijau       | Pelanggan konfirmasi terima        |
| `cancelled`         | Dibatalkan              | Merah       | Manual admin / auto-cancel expired |

### Pengembalian Stok

Ketika pesanan dibatalkan (baik manual maupun auto-cancel), **stok produk otomatis dikembalikan** ke jumlah semula.

### Alur Harian Admin

1. **Pagi**: Login â†’ cek dashboard â†’ filter pesanan "Sudah Dibayar" â†’ verifikasi bukti bayar â†’ ubah status ke "Diproses"
2. **Saat memproses**: Pack pesanan â†’ ubah status ke "Dikirim" â†’ informasikan pelanggan via telepon/WA
3. **Saat selesai**: Pelanggan konfirmasi terima â†’ ubah status ke "Selesai"
4. **Maintenance**: Update stok, update harga, ganti banner promosi, cek settings info bank

### Detail Website
Nama website: http://soekamitragrosir.com/
Nama penyedia layanan: Rumahweb
Alamat IP: 203.175.9.67
Nama penyimpanan data website: cloud hosting indonesia
